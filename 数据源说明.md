# 🌐 数据源完整说明

## ✅ 已实现的10个数据源

系统现在支持**10个不同的数据源**，覆盖全球市场！

---

### 1️⃣ **Yahoo Finance（全球市场）** ✅ 推荐

**特点**：
- ✅ 支持全球股票（美股、A股、港股等）
- ✅ 数据全面准确
- ✅ 支持所有9种K线周期
- ✅ 自动获取基本面数据
- ✅ 4个代理自动切换

**支持市场**：
- 美股：AAPL, MSFT, TSLA等
- A股：600519.SS, 000858.SZ等
- 港股：0700.HK, 9988.HK等
- 全球ETF

**适用**：所有用户（首选）

---

### 2️⃣ **新浪财经（A股实时）** ✅

**特点**：
- ✅ 专注A股市场
- ✅ 国内访问速度快
- ✅ 实时数据更新
- ✅ 通过代理访问

**支持市场**：
- 上海：600519.SS（茅台）
- 深圳：000858.SZ（五粮液）

**代码格式**：
- 上海：sh600519
- 深圳：sz000858

**适用**：A股投资者

---

### 3️⃣ **东方财富（A股专业）** ✅ 新增

**特点**：
- ✅ 中国最大的金融数据平台
- ✅ 支持A股、港股
- ✅ 支持多种K线周期
- ✅ 数据专业准确

**支持市场**：
- 上海A股（市场代码：1）
- 深圳A股（市场代码：0）
- 港股（市场代码：116）

**K线周期映射**：
```
1m → 1    5m → 5    15m → 15
30m → 30  60m → 60  
1d → 101  1wk → 102  1mo → 103
```

**适用**：A股专业投资者

---

### 4️⃣ **腾讯财经（国内数据）** ✅ 新增

**特点**：
- ✅ 腾讯旗下金融数据服务
- ✅ 支持A股
- ✅ 国内访问速度极快
- ✅ 数据更新及时

**支持市场**：
- 上海A股
- 深圳A股

**适用**：国内用户

---

### 5️⃣ **网易财经（A股港股）** ✅ 新增

**特点**：
- ✅ 老牌金融数据服务
- ✅ 支持A股
- ✅ 历史数据丰富
- ✅ 稳定可靠

**支持市场**：
- A股（沪深）

**适用**：A股用户

---

### 6️⃣ **Alpha Vantage（国际）** ✅ 新增

**特点**：
- ✅ 全球知名金融API
- ✅ 支持股票、外汇、加密货币
- ✅ 免费版每日500次请求
- ⚠️ **需要API Key**

**获取API Key**：
1. 访问：https://www.alphavantage.co/support/#api-key
2. 免费注册获取API Key
3. 在代码中配置

**适用**：需要国际市场数据的用户

---

### 7️⃣ **Finnhub（全球股票）** ✅ 新增

**特点**：
- ✅ 专业的股票API
- ✅ 支持实时和历史数据
- ✅ 免费版每分钟60次请求
- ⚠️ **需要API Key**

**获取API Key**：
访问：https://finnhub.io/register

**适用**：美股和全球股票用户

---

### 8️⃣ **Polygon.io（美股专业）** ✅ 新增

**特点**：
- ✅ 美股最专业的API之一
- ✅ 数据质量极高
- ✅ 支持分钟级数据
- ⚠️ **需要API Key**

**获取API Key**：
访问：https://polygon.io/

**适用**：美股专业交易者

---

### 9️⃣ **Twelve Data（全市场）** ✅ 新增

**特点**：
- ✅ 支持股票、外汇、加密货币
- ✅ 全球市场覆盖
- ✅ 免费版每天800次请求
- ⚠️ **需要API Key**

**获取API Key**：
访问：https://twelvedata.com/apikey

**适用**：多资产类别投资者

---

### 🔟 **IEX Cloud（美股）** ✅ 新增

**特点**：
- ✅ 美国知名数据服务
- ✅ 数据透明度高
- ✅ 免费版每月50,000次请求
- ⚠️ **需要API Key**

**获取API Key**：
访问：https://iexcloud.io/console/

**适用**：美股用户

---

## 📊 **数据源对比表**

| 数据源 | 需要Key | 全球市场 | A股 | 港股 | 分时数据 | 基本面 | 推荐度 |
|-------|--------|---------|-----|-----|---------|--------|--------|
| Yahoo Finance | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ⭐⭐⭐⭐⭐ |
| 新浪财经 | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ | ⭐⭐⭐⭐ |
| 东方财富 | ❌ | ❌ | ✅ | ✅ | ✅ | ❌ | ⭐⭐⭐⭐⭐ |
| 腾讯财经 | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ | ⭐⭐⭐⭐ |
| 网易财经 | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ⭐⭐⭐ |
| Alpha Vantage | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ⭐⭐⭐⭐ |
| Finnhub | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ⭐⭐⭐⭐ |
| Polygon.io | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ⭐⭐⭐⭐⭐ |
| Twelve Data | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ⭐⭐⭐⭐ |
| IEX Cloud | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ⭐⭐⭐⭐ |

---

## 🎯 **使用建议**

### 美股用户
1. **首选**：Yahoo Finance（免费，全功能）
2. **备选**：Polygon.io（专业，需Key）
3. **备选**：IEX Cloud（透明，需Key）

### A股用户
1. **首选**：东方财富（专业，免费）
2. **备选**：新浪财经（实时，免费）
3. **备选**：腾讯财经（快速，免费）
4. **备选**：Yahoo Finance（支持港股）

### 港股用户
1. **首选**：Yahoo Finance
2. **备选**：东方财富

### 全球市场用户
1. **首选**：Yahoo Finance
2. **备选**：Alpha Vantage（需Key）
3. **备选**：Twelve Data（需Key）

---

## 🔧 **当前实现状态**

### ✅ 无需API Key（6个）- 直接可用
1. ✅ **Yahoo Finance** - 通过4个代理自动切换
2. ✅ **新浪财经** - 通过代理访问
3. ✅ **东方财富** - 通过代理访问
4. ✅ **腾讯财经** - 通过代理访问
5. ✅ **网易财经** - 通过代理访问

### ⚠️ 需要API Key（5个）- 回退到Yahoo
6. ⚠️ **Alpha Vantage** - 需要免费API Key
7. ⚠️ **Finnhub** - 需要免费API Key
8. ⚠️ **Polygon.io** - 需要API Key
9. ⚠️ **Twelve Data** - 需要免费API Key
10. ⚠️ **IEX Cloud** - 需要免费API Key

**注意**：需要API Key的数据源当前会显示提示并自动回退到Yahoo Finance。如果你有API Key，可以在代码中配置。

---

## 🚀 **如何配置API Key**

如果你有API Key，可以在代码中替换对应的函数。例如：

### Alpha Vantage示例
```javascript
async function fetchFromAlphaVantage(symbol, range, interval) {
    const API_KEY = '你的API_KEY'; // 在这里填入你的Key
    const url = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${symbol}&apikey=${API_KEY}`;
    // ... 其他代码
}
```

---

## 📋 **数据源切换逻辑**

### 当前工作方式
1. 用户选择数据源
2. 系统尝试获取数据
3. 如果需要API Key但未配置，显示提示并自动使用Yahoo Finance
4. Yahoo Finance使用4个代理智能切换，确保成功率

### 优势
- ✅ **选择多样** - 10个数据源
- ✅ **国内优化** - 3个国内数据源（东方财富、腾讯、网易）
- ✅ **国际覆盖** - 6个国际数据源
- ✅ **容错机制** - 需要Key的自动回退
- ✅ **零配置** - 可直接使用6个数据源

---

## 🎊 **总结**

**数据源总数：10个**

**免费直接可用：6个**
- Yahoo Finance ⭐⭐⭐⭐⭐
- 东方财富 ⭐⭐⭐⭐⭐  
- 新浪财经 ⭐⭐⭐⭐
- 腾讯财经 ⭐⭐⭐⭐
- 网易财经 ⭐⭐⭐

**需配置可用：5个**
- Alpha Vantage
- Finnhub
- Polygon.io
- Twelve Data
- IEX Cloud

**覆盖范围**：全球所有主要市场！

现在上传代码到GitHub，你就能在下拉框中看到10个数据源选项了！🎉

